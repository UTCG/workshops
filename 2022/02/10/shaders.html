<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://utcg.github.io/workshops/assets/css/syntax.css"><link rel="preconnect" href="https://cdnjs.cloudflare.com"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><title> Shaders - UTCG Workshops</title><link rel="shortcut icon" href="https://utcg.github.io/workshops/favicon.png"><link rel="alternate" type="application/atom+xml" title="UTCG Workshops" href="https://utcg.github.io/workshops/atom.xml"><link rel="alternate" type="application/json" title="UTCG Workshops" href="https://utcg.github.io/workshops/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="https://utcg.github.io/workshops/sitemap.xml" /><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,300;1,400;1,500;1,600;1,700;1,900&display=swap" rel="stylesheet"><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}html{font-size:15px}#theme-toggle{opacity:0.65;position:relative;border-radius:5px;height:25px;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;transition:opacity 0.3s ease 0s;border:none;outline:none;background:none;cursor:pointer;padding:0px;appearance:none;transform:scale(0.8)}html,html[data-theme="light"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: rgb(222, 222, 222);--light-text-color: rgb(89, 183, 255);--medium-text-color: #555;--main-text-color: #333;--highlight-text-color: #6cb4a0;--dark-text-color: #393e46;--link-color: rgb(50, 87, 209);--code-bg-color: rgb(245, 245, 245);background-color:#fff}html #theme-toggle div,html[data-theme="light"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent, transparent);transform:scale(1);transition:all 0.45s ease 0s;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon, #2d3748)}html #theme-toggle div::before,html[data-theme="light"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;transform:translate(0px, 0px);opacity:1;transition:transform 0.45s ease 0s}html #theme-toggle div::after,html[data-theme="light"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),0 23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),-23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748);transform:scale(0);transition:all 0.35s ease 0s}html[data-theme="dark"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: #EEE;--light-text-color: #c4bbf0;--medium-text-color: #52057b;--main-text-color: #EAEAEA;--highlight-text-color: #6cb4a0;--dark-text-color: rgb(36, 38, 42);--link-color: rgb(255, 89, 125);--code-bg-color: rgb(36, 38, 42);background-color:#131418}html[data-theme="dark"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:4px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);background-color:var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(0.55);transition:all 0.45s ease 0s;overflow:visible;box-shadow:none}html[data-theme="dark"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:2px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);border-radius:50%;transform:translate(14px, -14px);opacity:0;transition:transform 0.45s ease 0s}html[data-theme="dark"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),0 23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(1);transition:all 0.35s ease 0s}body{font-family:var(--text-font),monospace;text-rendering:optimizeLegibility;line-height:1.75;color:var(--main-text-color)}a{color:var(--link-color);text-decoration:none}.post p{margin:1rem 0}.meta{margin:1.4rem 0}code,pre{background:var(--code-bg-color);margin:0 -27px;border-width:1px}code{font-family:var(--source-code-font),monospace;margin:unset;padding:0.1rem;color:var(--highlight-text-color)}pre code{background-color:unset;color:unset}pre{border-width:3px;padding:0.8rem;white-space:pre-wrap;border-style:none none none solid;border-color:var(--light-text-color)}img{max-width:100%}hr{background:var(--light-text-color);height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:0.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem 0}section{margin-top:5.5rem}blockquote{font-style:italic;border-left:5px solid var(--dark-text-color);padding-left:1rem}h1{color:var(--main-text-color);text-transform:uppercase;font-size:2rem;font-weight:bold;margin-bottom:1.5rem}h2,h3,h4,h5{font-weight:bold;margin-bottom:1.5rem;font-size:2rem}h2{font-size:1.8rem}h3{font-size:1.6rem}h4{font-size:1.4rem}h5{font-size:1.2rem}h6{font-size:1rem}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts>h3{font-weight:500}.post ul{margin:0px;margin:0px 0px 10px 10px}.post ol{margin:0px;margin:0px 0px 10px 15px}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:bold}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}time{color:var(--main-text-color)}.post>h1.title{font-size:x-large;margin-top:0;margin-bottom:0}.post>time{margin-bottom:0;margin-top:3rem}.highlight{margin:0px}main{display:flex;max-width:47rem;margin:-5rem auto 0;padding:2.4rem 2rem;flex-direction:column}.flex-row-between{display:flex;flex-direction:row;justify-content:space-between}.social-footer{padding:1rem;display:flex;justify-content:center;position:initial}.social-footer .social-footer-icons .fa{font-size:1.3rem;color:#a9a9a9}.social-footer .social-footer-icons .fa:hover{color:dimgray;transition:color 0.3s ease-in}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}main{padding:0 2rem}}section{flex-grow:999;display:flex;flex-direction:column}figcaption{font-size:smaller}.bio{margin-bottom:5rem}::selection{background-color:#fffba0;color:#333}.search-article{position:relative}.search-article label[for="search-input"]{position:relative;top:-10px;left:11px}.search-article input[type="search"]{top:-1rem;left:0;border:0;width:100%;height:30px;outline:none;position:absolute;border-radius:5px;padding:10px 10px 10px 35px;color:var(--main-text-color);-webkit-appearance:none;background-color:rgba(128,128,128,0.1);border:1px solid rgba(128,128,128,0.1)}.search-article input[type="search"]::-webkit-input-placeholder{color:#808080}.search-article input[type="search"]::-webkit-search-decoration,.search-article input[type="search"]::-webkit-search-results-decoration{display:none}#search-results{text-align:center}#search-results li{text-align:center}#search-results li::before{content:"›";display:inline-block;margin-left:-1.3em;width:1.3em;color:var(--main-text-color)}.post-nav{display:flex;position:relative;margin-top:0;border-top:2px solid var(--light-text-color);line-height:1.4}.post-nav .post-nav-item{border-bottom:0;padding-bottom:10px;width:50%;padding-top:10px;text-decoration:none;box-sizing:border-box}.post-nav .post-nav-item .post-title{color:var(--main-text-color)}.post-nav .post-nav-item:hover .post-title,.post-nav .post-nav-item:focus .post-title{color:var(--link-color);opacity:0.9}.post-nav .post-nav-item .nav-arrow{font-size:17px;color:var(--main-text-color);margin-bottom:3px;font-weight:bold}.post-nav .post-nav-item:nth-child(odd){padding-left:0;padding-right:20px}.post-nav .post-nav-item:nth-child(even){text-align:right;padding-right:0;padding-left:20px}.tags ul{list-style:none;display:grid;grid-template-columns:auto auto auto auto auto auto;grid-template-rows:auto auto auto auto}.tags li{white-space:normal;text-overflow:ellipsis}.timeline{position:center;width:650px;margin:-6em auto;padding:1px;list-style-type:none}@media (max-width: 860px){.timeline{width:100%}}.timeline:before{position:absolute;left:50%;top:0;content:' ';display:block;width:6px;height:100%;margin-left:-3px;background:var(--light-text-color);z-index:5}@media (max-width: 375px){.timeline:before{height:150%}}.timeline li{padding:2em 0}@media (max-width: 860px){.timeline li{padding:2em 0}}.timeline li::after{content:"";display:block;clear:both;visibility:hidden}.direction-l{position:relative;width:287px;float:left;text-align:right}@media (max-width: 860px){.direction-l{float:none;width:100%;text-align:center}}.direction-l .flag{color:#333;box-shadow:-1px 1px 1px rgba(0,0,0,0.52)}.direction-l .flag:after{content:"";position:absolute;left:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-left-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-l .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-l .time-wrapper{float:left}@media (max-width: 860px){.direction-l .time-wrapper{float:none}}.direction-r{position:relative;width:293px;float:right;text-align:left}@media (max-width: 860px){.direction-r{float:none;width:100%;text-align:center}}.direction-r .flag{color:#333;box-shadow:1px 1px 1px rgba(0,0,0,0.52)}.direction-r .flag:after{content:"";position:absolute;right:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-right-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-r .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-r .flag:before{left:-40px}.direction-r .time-wrapper{float:right}@media (max-width: 860px){.direction-r .time-wrapper{float:none}}.flag-wrapper{position:relative;display:inline-block;text-align:center}@media (max-width: 860px){.flag-wrapper{text-align:center}}.flag-wrapper .flag{position:relative;display:inline;background:#f8f8f8;padding:6px 10px;border-radius:5px;font-weight:600;text-align:left}@media (max-width: 860px){.flag-wrapper .flag{background:#fff;z-index:15}}.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:60%;right:-40px;content:' ';display:block;width:12px;height:12px;margin-top:-10px;background:#fff;border-radius:10px;border:4px solid var(--link-color);z-index:10}@media (max-width: 860px){.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:-30px;left:53%;content:' ';display:block;margin-left:-10px}}.time-wrapper{display:inline;line-height:1em;font-size:0.66666em;color:var(--link-color);vertical-align:middle}@media (max-width: 860px){.time-wrapper{display:block;position:relative;margin:4px 0 0 0;z-index:14}}.time-wrapper .time{display:inline-block;padding:4px 6px;background:#f8f8f8}.desc{margin:1em 0.2em -3.5em 0;font-size:0.9em;line-height:1.5em}.desc a{color:var(--link-color);text-decoration:none}.desc a:hover{text-decoration:underline}@media (max-width: 860px){.desc{position:relative;margin:1em 1em 0 1em;padding:1em;background:var(--code-bg-color);box-shadow:0 0 1px rgba(0,0,0,0.2);z-index:15}}</style></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-3EP7KLCYVP"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-3EP7KLCYVP'); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { Macros: { R: "{\\mathbb R}", N: "{\\mathbb N}", curlies: ["{\\lbrace #1 \\brace}", 1] } }, tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script><body><main><section class="post"><div class="flex-row-between"> <a href="https://utcg.github.io/workshops/">« back</a> <button title="Change theme" id="theme-toggle" onclick="modeSwitcher()"><div></div></button></div><time datetime="2022-02-10T00:00:00+01:00">Feb 10, 2022 - 9 ' read</time><h1 class="title"> Shaders</h1><span class="meta"> </span><style> .red > code { color: #FF8080; } .blue > code { color: #4080FF; }</style><h1 id="utcg-shaders-workshop"> UTCG Shaders Workshop <a href="#utcg-shaders-workshop">#</a></h1><h2 id="intro"> Intro <a href="#intro">#</a></h2><h3 id="what-is-a-shader"> What is a shader? <a href="#what-is-a-shader">#</a></h3><p>A <em>pixel shader</em> (aka <em>fragment shader</em>) is code that runs for each pixel being rendered. There are other types of shaders (e.g. vertex shaders, geometry shaders, etc) but we won’t cover them today. Generally, they’re code that runs on the GPU, usually for rendering graphics. In games, they’re usually used for lighting effects (they are called shaders) and other fancy effects at the end of the rendering pipeline. GPUs are great for shaders, because they’re made for doing similar work for lots of different inputs - in this case, they’ll run the same shader code for each pixel on the screen.</p><h3 id="coding-shaders"> Coding shaders <a href="#coding-shaders">#</a></h3><p>Shaders are usually written in <em>GLSL</em>, which is <em>OpenGL Shading Language</em>. It’s kind of like C/C++. This is the language that Minecraft shaders use!</p><p>One important thing to note is that it does not automatically convert between integers and floats. So it will throw an error if you do something like <code class="language-plaintext highlighter-rouge">float x = 2;</code> or <code class="language-plaintext highlighter-rouge">float y = M_PI / 2</code>. To deal with this, always put a <code class="language-plaintext highlighter-rouge">.</code> after an integer, e.g. <code class="language-plaintext highlighter-rouge">float x = 2.</code> and <code class="language-plaintext highlighter-rouge">float y = M_PI / 2.</code>.</p><h2 id="fragment-shader-basics-transformations-colour---mandelbrot-set"> Fragment shader basics, Transformations, Colour - Mandelbrot Set <a href="#fragment-shader-basics-transformations-colour---mandelbrot-set">#</a></h2><p>To learn the basics, let’s start by rendering the <a href="https://en.wikipedia.org/wiki/Mandelbrot_set">Mandelbrot set</a>. Here’s some <a href="https://www.shadertoy.com/view/NdsyDX">starter code</a> - we won’t be paying much attention to the math, so the <code class="language-plaintext highlighter-rouge">mandel()</code> function is provided (and you don’t need to understand it).</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/2/21/Mandel_zoom_00_mandelbrot_set.jpg" alt="Mandelbrot Set by Wolfgang Beyer from Wikipedia" /></p><p>TODO: ^replace that with iframe of actual shader later</p><h3 id="what-does-our-shader-need-to-do"> What does our shader need to do? <a href="#what-does-our-shader-need-to-do">#</a></h3><p>Our fragment shader’s input is a pixel on the screen and its output is its colour, as a 4D RGBA (Red/Green/Blue/Alpha) vector.</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">mainImage</span><span class="p">(</span> <span class="k">out</span> <span class="kt">vec4</span> <span class="n">fragColor</span><span class="p">,</span> <span class="k">in</span> <span class="kt">vec2</span> <span class="n">fragCoord</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div><p>We’ve given a variable <code class="language-plaintext highlighter-rouge">vec2 uv</code> to represent the transformed coordinates of a pixel. We’ll use it and <code class="language-plaintext highlighter-rouge">mandel()</code> to calculate the colour for each pixel.</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">mainImage</span><span class="p">(</span> <span class="k">out</span> <span class="kt">vec4</span> <span class="n">fragColor</span><span class="p">,</span> <span class="k">in</span> <span class="kt">vec2</span> <span class="n">fragCoord</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="kt">vec2</span> <span class="n">uv</span> <span class="o">=</span> <span class="n">fragCoord</span><span class="o">/</span><span class="n">iResolution</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>

    <span class="c1">// mandel returns a value between 0 and 1</span>
    <span class="kt">float</span> <span class="n">value</span> <span class="o">=</span> <span class="n">mandel</span><span class="p">(</span><span class="n">uv</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">uv</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>

    <span class="kt">vec3</span> <span class="n">col</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>

    <span class="n">fragColor</span> <span class="o">=</span> <span class="kt">vec4</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="mi">1</span><span class="p">.);</span>
<span class="p">}</span>
</code></pre></div></div><p>Since we’ve put <code class="language-plaintext highlighter-rouge">value</code> into the R/G/B parts of <code class="language-plaintext highlighter-rouge">col</code>, the resulting image should be in greyscale.</p><h3 id="transformation"> Transformation <a href="#transformation">#</a></h3><p>We mentioned that <code class="language-plaintext highlighter-rouge">uv</code> are the transformed coordinates. You might recall from high school that we can transform coordinates by multiplying/dividing our vector by a number to stretch, or by adding/subtracting another vector to shift. Try doing this yourself to get the whole set in the frame!</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">mainImage</span><span class="p">(</span> <span class="k">out</span> <span class="kt">vec4</span> <span class="n">fragColor</span><span class="p">,</span> <span class="k">in</span> <span class="kt">vec2</span> <span class="n">fragCoord</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="kt">vec2</span> <span class="n">uv</span> <span class="o">=</span> <span class="kt">vec2</span><span class="p">(</span><span class="n">fragCoord</span><span class="p">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">hrztl_stretch</span> <span class="o">-</span> <span class="n">hrztl_shift</span><span class="p">,</span>
                   <span class="n">fragCoord</span><span class="p">.</span><span class="n">y</span> <span class="o">/</span> <span class="n">vrtcl_stretch</span> <span class="o">-</span> <span class="n">vrtcl_shift</span><span class="p">);</span>

    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="working-with-colour---mix"> Working with colour - <code class="language-plaintext highlighter-rouge">mix()</code> <a href="#working-with-colour---mix">#</a></h3><p>We can make other colours by putting different values into the R/G/B parts of <code class="language-plaintext highlighter-rouge">col</code>, e.g. <span class="red"><code class="language-plaintext highlighter-rouge">red = vec3(1., .5, .5)</code></span> or <span class="blue"><code class="language-plaintext highlighter-rouge">blue = vec3(.25, .5, 1.)</code></span>.</p><p>We can also interpolate between colours (or really anything) using the GLSL function <code class="language-plaintext highlighter-rouge">mix()</code>. The first two arguments are the values we want to interpolate between, and the last is the “slider value” to “slide” between the two, from <code class="language-plaintext highlighter-rouge">0</code> to <code class="language-plaintext highlighter-rouge">1</code>.</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">vec3</span> <span class="n">red</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">1</span><span class="p">.,</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="p">.</span><span class="mi">5</span><span class="p">);</span>
<span class="kt">vec3</span> <span class="n">blue</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(.</span><span class="mi">25</span><span class="p">,</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">.);</span>
<span class="kt">vec3</span> <span class="n">col</span> <span class="o">=</span> <span class="n">mix</span><span class="p">(</span><span class="n">red</span><span class="p">,</span> <span class="n">blue</span><span class="p">,</span> <span class="n">mandel</span><span class="p">);</span>
</code></pre></div></div><h3 id="extras"> Extras <a href="#extras">#</a></h3><p>Throw <code class="language-plaintext highlighter-rouge">sin()</code>, <code class="language-plaintext highlighter-rouge">cos()</code>, and <code class="language-plaintext highlighter-rouge">iTime</code> into your colour calculation and we’ve got a rave going!</p><h2 id="rotation-time-circles---analogue-clock"> Rotation, Time, Circles - Analogue Clock <a href="#rotation-time-circles---analogue-clock">#</a></h2><p>Our next example is an analogue clock. Here’s some <a href="https://www.shadertoy.com/view/fdlyz2">starter code</a> - we’ve created a <code class="language-plaintext highlighter-rouge">uv</code> variable for you, to give you the coordinates of the pixel from the centre of the screen. Here’s the <a href="https://www.shadertoy.com/view/fslcR2">finished shader</a> for reference.</p><iframe width="640" height="360" frameborder="0" src="https://www.shadertoy.com/embed/fslcR2?gui=true&amp;t=10&amp;paused=false&amp;muted=false" allowfullscreen=""></iframe><h3 id="creating-the-clock-face"> Creating the clock face <a href="#creating-the-clock-face">#</a></h3><p>Clocks are circles. This is basic anthropology. But what is a circle?</p><p>A circle is all the points within some radius $r$ of the centre of the circle $\mathbf c$. So if we have a pixel whose coordinates are $\mathbf p = (x, y)$, then we can check if the pixel is within the circle by checking if $\text{length}(\mathbf p - \mathbf c) &lt; r$. Let’s do that in our code.</p><p>Let’s set the centre of our clock to be the centre of the screen, and give it a radius of 0.4:</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">vec2</span> <span class="n">clockCentre</span> <span class="o">=</span> <span class="kt">vec2</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="kt">float</span> <span class="n">clockRadius</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4</span><span class="p">;</span>
</code></pre></div></div><p>And now, let’s use the GLSL <code class="language-plaintext highlighter-rouge">length</code> function to implement the circle formula and colour the clock face red:</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">uv</span> <span class="o">-</span> <span class="n">clockCentre</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">clockRadius</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">col</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">1</span><span class="p">.,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><p>If you render now, you should see a big red circle in the middle of the screen!</p><h3 id="initializing-the-seconds-hand"> Initializing the seconds hand <a href="#initializing-the-seconds-hand">#</a></h3><p>The initial position of a clock hand, at time 0 is pointing straight up, so let’s create an <code class="language-plaintext highlighter-rouge">up</code> vector to represent that:</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">vec2</span> <span class="n">up</span> <span class="o">=</span> <span class="kt">vec2</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">);</span>
</code></pre></div></div><p>Now let’s render it as a small white dot, the same way we rendered the clock face:</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">vec2</span> <span class="n">secondsHand</span> <span class="o">=</span> <span class="n">up</span><span class="p">;</span>

<span class="kt">float</span> <span class="n">handRadius</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mo">02</span><span class="p">;</span>

<span class="c1">// put the following code AFTER the clock face colour code</span>

<span class="k">if</span> <span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">uv</span> <span class="o">-</span> <span class="n">secondsHand</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">handRadius</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">col</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="making-it-move"> Making it move <a href="#making-it-move">#</a></h3><p>Using linear algebra, we’ve created a <code class="language-plaintext highlighter-rouge">rot()</code> function which returns a matrix that will rotate a 2D vector clockwise by a given angle in radians (<a href="https://en.wikipedia.org/wiki/Rotation_matrix">more on rotation matrices</a>. To get a rotated vector, you multiply a rotation matrix times a vector. For example,</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">vec2</span> <span class="n">northEast</span> <span class="o">=</span> <span class="kt">vec2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="kt">vec2</span> <span class="n">southEast</span> <span class="o">=</span> <span class="n">rot</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="n">M_PI</span><span class="p">)</span> <span class="o">*</span> <span class="n">northEast</span><span class="p">;</span>
</code></pre></div></div><p>In our case, we want to rotate our clock hand by some angle based on time. GLSL gives us a handy variable <code class="language-plaintext highlighter-rouge">iTime</code>, which is the time in seconds since we started the shader. Let’s try it out by editing our seconds hand’s position:</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">vec2</span> <span class="n">secondsHand</span> <span class="o">=</span> <span class="n">rot</span><span class="p">(</span><span class="n">iTime</span><span class="p">)</span> <span class="o">*</span> <span class="n">up</span><span class="p">;</span>
</code></pre></div></div><h3 id="getting-the-speed-right"> Getting the speed right <a href="#getting-the-speed-right">#</a></h3><p>Great, it’s rotating! But it’s the wrong speed. One full rotation is $2\pi$ (aka <code class="language-plaintext highlighter-rouge">2. * M_PI</code>) radians, and it takes 60 seconds, so we’ll rotate our seconds hand correspondingly:</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="n">seconds</span> <span class="o">=</span> <span class="n">iTime</span><span class="p">;</span>

<span class="c1">// 60 seconds for a rotation</span>
<span class="kt">vec2</span> <span class="n">secondsHand</span> <span class="o">=</span> <span class="n">rot</span><span class="p">(</span><span class="n">seconds</span> <span class="o">/</span> <span class="mi">60</span><span class="p">.</span> <span class="o">*</span> <span class="mi">2</span><span class="p">.</span> <span class="o">*</span> <span class="n">M_PI</span><span class="p">)</span> <span class="o">*</span> <span class="n">up</span><span class="p">;</span>
</code></pre></div></div><p>Now we have a seconds hand! Let’s try a minutes hand next, using the same strategy:</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="n">minutes</span> <span class="o">=</span> <span class="n">seconds</span> <span class="o">/</span> <span class="mi">60</span><span class="p">.</span>

<span class="c1">// 60 mins for a rotation</span>
<span class="kt">vec2</span> <span class="n">minutesHand</span> <span class="o">=</span> <span class="n">rot</span><span class="p">(</span><span class="n">minutes</span> <span class="o">/</span> <span class="mi">60</span><span class="p">.</span> <span class="o">*</span> <span class="mi">2</span><span class="p">.</span> <span class="o">*</span> <span class="n">M_PI</span><span class="p">)</span> <span class="o">*</span> <span class="n">up</span><span class="p">;</span>

<span class="p">...</span>

<span class="k">if</span> <span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">uv</span> <span class="o">-</span> <span class="n">minutesHand</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">handRadius</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">col</span> <span class="o">=</span> <span class="kt">vec3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><p>Try doing an hour hand yourself!</p><h3 id="extras-1"> Extras <a href="#extras-1">#</a></h3><p>To make the clock show the actual time, take a look at the GLSL <code class="language-plaintext highlighter-rouge">iDate</code> variable. Note that this is a 4D vector! To make it even more clock-like, see if you can use the GLSL <code class="language-plaintext highlighter-rouge">floor()</code> function to make the seconds hand “tick” instead of rotating smoothly.</p><p>You can also make it look better by changing the lengths of the hands, so that they never overlap. Other aesthetic upgrades could be a bezel, or patterns on the clock face. Numbers are a bit more difficult, but look into textures if you have some time and wanna try it out.</p><h2 id="using-sin-and-cos-creatively---noise-art"> Using <code class="language-plaintext highlighter-rouge">sin()</code> and <code class="language-plaintext highlighter-rouge">cos()</code> creatively - Noise art <a href="#using-sin-and-cos-creatively---noise-art">#</a></h2><p>The goal of this workshop was to give you enough shaders knowledge to make cool noise art, like this:</p><iframe width="640" height="360" frameborder="0" src="https://www.shadertoy.com/embed/ssScDw?gui=true&amp;t=10&amp;paused=false&amp;muted=false" allowfullscreen=""></iframe><p>How do we do this?</p><p>…</p><p>Just kinda messing around tbh.</p><h3 id="creating-patterns-with-functions"> Creating patterns with functions <a href="#creating-patterns-with-functions">#</a></h3><p>We know we can <code class="language-plaintext highlighter-rouge">mix()</code> two colours as long as we have a value between <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">1</code>. And since the trigonometric functions <code class="language-plaintext highlighter-rouge">sin()</code> and <code class="language-plaintext highlighter-rouge">cos()</code> are periodic, we can use them to create patterns. We can also combine them in weird ways to get unexpected patterns.</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="nf">noiseFunc</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">something</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p><img src="https://upload.wikimedia.org/wikipedia/commons/7/71/Sine_cosine_one_period.svg" alt="Sine and Cosine graph by Geek3 from Wikipedia" /></p><p><code class="language-plaintext highlighter-rouge">sin()</code> and <code class="language-plaintext highlighter-rouge">cos()</code> both range between <code class="language-plaintext highlighter-rouge">-1</code> and <code class="language-plaintext highlighter-rouge">1</code>, so we need to transform them to the range we want.</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="nf">noiseFunc</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">val</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(...);</span>

    <span class="c1">// transform cos value so that it's between 0 and 1</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>What do we put inside that <code class="language-plaintext highlighter-rouge">cos()</code> function? Anything basically. Go crazy. Just do random stuff. Better if you mix <code class="language-plaintext highlighter-rouge">x</code>, <code class="language-plaintext highlighter-rouge">y</code>, <code class="language-plaintext highlighter-rouge">iTime</code>, more trigonometry, etc in there. Here’s what I did for the example above:</p><div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="nf">noiseFunc</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">val</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">x</span>
                    <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="p">.</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">iTime</span><span class="p">))</span>
                    <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">iTime</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span> <span class="o">*</span> <span class="n">y</span><span class="p">))</span>
                    <span class="o">+</span> <span class="mi">10</span><span class="p">.</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                    <span class="p">);</span>

    <span class="c1">// transform cos value so that it's between 0 and 1</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>Feel free to also use the functions we provided earlier such as <code class="language-plaintext highlighter-rouge">mandel()</code> and <code class="language-plaintext highlighter-rouge">rot()</code>, to mix more colours, to use if/else to render different things for different parts of the screen, etc. Go crazy.</p><p>When you’re done, submit your shader to the competition here: TODO</p><h2 id="thanks"> Thanks! <a href="#thanks">#</a></h2><p>If you enjoyed this workshop, make sure you follow us on social media, join our mailing list, and join our Discord to keep up with our other events! You can find all of it on our website <a href="https://utcg.club/">utcg.club</a>.</p></section><section><nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/workshops/2021/11/01/blender-part2"><div class="nav-arrow">Previous</div><span class="post-title">Blender Workshop Part 2 Recording</span> </a></nav></section></main><script> function setTheme(theme) { if (theme === "dark") { document.documentElement.setAttribute('data-theme', 'dark'); window.localStorage.setItem('theme', 'dark'); document.getElementById("theme-toggle").classList.add('sun'); document.getElementById("theme-toggle").classList.remove('moon'); } else { document.documentElement.setAttribute('data-theme', 'light'); window.localStorage.setItem('theme', 'light'); document.getElementById("theme-toggle").classList.add('moon'); document.getElementById("theme-toggle").classList.remove('sun'); } } let theme = localStorage.getItem('theme'); theme = theme || (window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light'); setTheme(theme); function modeSwitcher() { let currentMode = document.documentElement.getAttribute('data-theme'); if (currentMode === "dark") { setTheme('light'); } else { setTheme('dark'); } } </script></body><footer class="social-footer"><div class="social-footer-icons"> <a href="https://github.com/P0WEX" title="Github profile, nothing much there, yet" target="_blank" rel="noopener noreferrer"><i class="fa fa-github" aria-hidden="true"></i></a> <a href="https://utcg.github.io/workshops/atom.xml" title="Feed RSS" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss" aria-hidden="true"></i></a> <a href="https://github.com/P0WEX/Gesko" title="Browse the code" target="_blank" rel="noopener noreferrer"><i class="fa fa-code" aria-hidden="true"></i></a></div></footer></html>
