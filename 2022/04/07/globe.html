<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://utcg.github.io/workshops/assets/css/syntax.css"><link rel="preconnect" href="https://cdnjs.cloudflare.com"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><title> Globe - UTCG Workshops</title><link rel="shortcut icon" href="https://utcg.github.io/workshops/favicon.png"><link rel="alternate" type="application/atom+xml" title="UTCG Workshops" href="https://utcg.github.io/workshops/atom.xml"><link rel="alternate" type="application/json" title="UTCG Workshops" href="https://utcg.github.io/workshops/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="https://utcg.github.io/workshops/sitemap.xml" /><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,300;1,400;1,500;1,600;1,700;1,900&display=swap" rel="stylesheet"><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}html{font-size:15px}#theme-toggle{opacity:0.65;position:relative;border-radius:5px;height:25px;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;transition:opacity 0.3s ease 0s;border:none;outline:none;background:none;cursor:pointer;padding:0px;appearance:none;transform:scale(0.8)}html,html[data-theme="light"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: rgb(222, 222, 222);--light-text-color: rgb(89, 183, 255);--medium-text-color: #555;--main-text-color: #333;--highlight-text-color: #6cb4a0;--dark-text-color: #393e46;--link-color: rgb(50, 87, 209);--code-bg-color: rgb(245, 245, 245);background-color:#fff}html #theme-toggle div,html[data-theme="light"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent, transparent);transform:scale(1);transition:all 0.45s ease 0s;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon, #2d3748)}html #theme-toggle div::before,html[data-theme="light"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;transform:translate(0px, 0px);opacity:1;transition:transform 0.45s ease 0s}html #theme-toggle div::after,html[data-theme="light"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),0 23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),-23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748);transform:scale(0);transition:all 0.35s ease 0s}html[data-theme="dark"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: #EEE;--light-text-color: #c4bbf0;--medium-text-color: #52057b;--main-text-color: #EAEAEA;--highlight-text-color: #6cb4a0;--dark-text-color: rgb(36, 38, 42);--link-color: rgb(255, 89, 125);--code-bg-color: rgb(36, 38, 42);background-color:#131418}html[data-theme="dark"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:4px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);background-color:var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(0.55);transition:all 0.45s ease 0s;overflow:visible;box-shadow:none}html[data-theme="dark"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:2px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);border-radius:50%;transform:translate(14px, -14px);opacity:0;transition:transform 0.45s ease 0s}html[data-theme="dark"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),0 23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(1);transition:all 0.35s ease 0s}body{font-family:var(--text-font),monospace;text-rendering:optimizeLegibility;line-height:1.75;color:var(--main-text-color)}a{color:var(--link-color);text-decoration:none}.post p{margin:1rem 0}.meta{margin:1.4rem 0}code,pre{background:var(--code-bg-color);margin:0 -27px;border-width:1px}code{font-family:var(--source-code-font),monospace;margin:unset;padding:0.1rem;color:var(--highlight-text-color)}pre code{background-color:unset;color:unset}pre{border-width:3px;padding:0.8rem;white-space:pre-wrap;border-style:none none none solid;border-color:var(--light-text-color)}img{max-width:100%}hr{background:var(--light-text-color);height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:0.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem 0}section{margin-top:5.5rem}blockquote{font-style:italic;border-left:5px solid var(--dark-text-color);padding-left:1rem}h1{color:var(--main-text-color);text-transform:uppercase;font-size:2rem;font-weight:bold;margin-bottom:1.5rem}h2,h3,h4,h5{font-weight:bold;margin-bottom:1.5rem;font-size:2rem}h2{font-size:1.8rem}h3{font-size:1.6rem}h4{font-size:1.4rem}h5{font-size:1.2rem}h6{font-size:1rem}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts>h3{font-weight:500}.post ul{margin:0px;margin:0px 0px 10px 10px}.post ol{margin:0px;margin:0px 0px 10px 15px}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:bold}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}time{color:var(--main-text-color)}.post>h1.title{font-size:x-large;margin-top:0;margin-bottom:0}.post>time{margin-bottom:0;margin-top:3rem}.highlight{margin:0px}main{display:flex;max-width:47rem;margin:-5rem auto 0;padding:2.4rem 2rem;flex-direction:column}.flex-row-between{display:flex;flex-direction:row;justify-content:space-between}.social-footer{padding:1rem;display:flex;justify-content:center;position:initial}.social-footer .social-footer-icons .fa{font-size:1.3rem;color:#a9a9a9}.social-footer .social-footer-icons .fa:hover{color:dimgray;transition:color 0.3s ease-in}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}main{padding:0 2rem}}section{flex-grow:999;display:flex;flex-direction:column}figcaption{font-size:smaller}.bio{margin-bottom:5rem}::selection{background-color:#fffba0;color:#333}.search-article{position:relative}.search-article label[for="search-input"]{position:relative;top:-10px;left:11px}.search-article input[type="search"]{top:-1rem;left:0;border:0;width:100%;height:30px;outline:none;position:absolute;border-radius:5px;padding:10px 10px 10px 35px;color:var(--main-text-color);-webkit-appearance:none;background-color:rgba(128,128,128,0.1);border:1px solid rgba(128,128,128,0.1)}.search-article input[type="search"]::-webkit-input-placeholder{color:#808080}.search-article input[type="search"]::-webkit-search-decoration,.search-article input[type="search"]::-webkit-search-results-decoration{display:none}#search-results{text-align:center}#search-results li{text-align:center}#search-results li::before{content:"›";display:inline-block;margin-left:-1.3em;width:1.3em;color:var(--main-text-color)}.post-nav{display:flex;position:relative;margin-top:0;border-top:2px solid var(--light-text-color);line-height:1.4}.post-nav .post-nav-item{border-bottom:0;padding-bottom:10px;width:50%;padding-top:10px;text-decoration:none;box-sizing:border-box}.post-nav .post-nav-item .post-title{color:var(--main-text-color)}.post-nav .post-nav-item:hover .post-title,.post-nav .post-nav-item:focus .post-title{color:var(--link-color);opacity:0.9}.post-nav .post-nav-item .nav-arrow{font-size:17px;color:var(--main-text-color);margin-bottom:3px;font-weight:bold}.post-nav .post-nav-item:nth-child(odd){padding-left:0;padding-right:20px}.post-nav .post-nav-item:nth-child(even){text-align:right;padding-right:0;padding-left:20px}.tags ul{list-style:none;display:grid;grid-template-columns:auto auto auto auto auto auto;grid-template-rows:auto auto auto auto}.tags li{white-space:normal;text-overflow:ellipsis}.timeline{position:center;width:650px;margin:-6em auto;padding:1px;list-style-type:none}@media (max-width: 860px){.timeline{width:100%}}.timeline:before{position:absolute;left:50%;top:0;content:' ';display:block;width:6px;height:100%;margin-left:-3px;background:var(--light-text-color);z-index:5}@media (max-width: 375px){.timeline:before{height:150%}}.timeline li{padding:2em 0}@media (max-width: 860px){.timeline li{padding:2em 0}}.timeline li::after{content:"";display:block;clear:both;visibility:hidden}.direction-l{position:relative;width:287px;float:left;text-align:right}@media (max-width: 860px){.direction-l{float:none;width:100%;text-align:center}}.direction-l .flag{color:#333;box-shadow:-1px 1px 1px rgba(0,0,0,0.52)}.direction-l .flag:after{content:"";position:absolute;left:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-left-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-l .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-l .time-wrapper{float:left}@media (max-width: 860px){.direction-l .time-wrapper{float:none}}.direction-r{position:relative;width:293px;float:right;text-align:left}@media (max-width: 860px){.direction-r{float:none;width:100%;text-align:center}}.direction-r .flag{color:#333;box-shadow:1px 1px 1px rgba(0,0,0,0.52)}.direction-r .flag:after{content:"";position:absolute;right:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-right-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-r .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-r .flag:before{left:-40px}.direction-r .time-wrapper{float:right}@media (max-width: 860px){.direction-r .time-wrapper{float:none}}.flag-wrapper{position:relative;display:inline-block;text-align:center}@media (max-width: 860px){.flag-wrapper{text-align:center}}.flag-wrapper .flag{position:relative;display:inline;background:#f8f8f8;padding:6px 10px;border-radius:5px;font-weight:600;text-align:left}@media (max-width: 860px){.flag-wrapper .flag{background:#fff;z-index:15}}.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:60%;right:-40px;content:' ';display:block;width:12px;height:12px;margin-top:-10px;background:#fff;border-radius:10px;border:4px solid var(--link-color);z-index:10}@media (max-width: 860px){.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:-30px;left:53%;content:' ';display:block;margin-left:-10px}}.time-wrapper{display:inline;line-height:1em;font-size:0.66666em;color:var(--link-color);vertical-align:middle}@media (max-width: 860px){.time-wrapper{display:block;position:relative;margin:4px 0 0 0;z-index:14}}.time-wrapper .time{display:inline-block;padding:4px 6px;background:#f8f8f8}.desc{margin:1em 0.2em -3.5em 0;font-size:0.9em;line-height:1.5em}.desc a{color:var(--link-color);text-decoration:none}.desc a:hover{text-decoration:underline}@media (max-width: 860px){.desc{position:relative;margin:1em 1em 0 1em;padding:1em;background:var(--code-bg-color);box-shadow:0 0 1px rgba(0,0,0,0.2);z-index:15}}</style></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-3EP7KLCYVP"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-3EP7KLCYVP'); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { Macros: { R: "{\\mathbb R}", N: "{\\mathbb N}", curlies: ["{\\lbrace #1 \\brace}", 1] } }, tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script><body><main><section class="post"><div class="flex-row-between"> <a href="https://utcg.github.io/workshops/">« back</a> <button title="Change theme" id="theme-toggle" onclick="modeSwitcher()"><div></div></button></div><time datetime="2022-04-07T00:00:00+02:00">Apr 7, 2022 - 8 ' read</time><h1 class="title"> Globe</h1><span class="meta"> </span><h1 id="udesign-x-utcg-workshop"> UDesign x UTCG Workshop <a href="#udesign-x-utcg-workshop">#</a></h1><h2 id="running-the-site"> Running the site <a href="#running-the-site">#</a></h2><p>In order to avoid the notorious <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/Errors">CORS errors</a>, we need to serve our website from a web server instead of just opening the HTML page in a browser from our file system. Luckily, this is easy!</p><p>If you already have Python installed, you can simply go to the directory that stores your <code class="language-plaintext highlighter-rouge">index.html</code> and run the command <code class="language-plaintext highlighter-rouge">python3 -m http.server</code> (or <code class="language-plaintext highlighter-rouge">python -m SimpleHTTPServer</code> if you’re using Python 2). Then your website will be live at <code class="language-plaintext highlighter-rouge">http://localhost:8000/index.html</code>.</p><p>If you have <a href="">VS Code</a> installed, you can also use the <code class="language-plaintext highlighter-rouge">ritwickdey.LiveServer</code> extension.</p><p><a href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/set_up_a_local_testing_server">Here’s</a> some more info on running a local web server.</p><p>You should see an empty page with a gradient background that has no console errors.</p><p>While working on this page, remember to save your code and refresh every time you want to see your changes!</p><h2 id="setting-up-a-scene"> Setting up a scene <a href="#setting-up-a-scene">#</a></h2><p>Every scene made with three.js has a few basic objects.</p><ul><li>the Scene (<a href="https://threejs.org/docs/?q=scene#api/en/scenes/Scene">THREE.Scene</a><ul><li>This is a representation of all the 3D objects within our scene.</li></ul></li><li>our object <a href="https://threejs.org/docs/?q=group#api/en/objects/Group">Group</a><ul><li>We’ll put our main objects in this group, so that we can access them outside of our init function and update their properties later, i.e. if we want to move them around.</li></ul></li><li>the <a href="https://threejs.org/docs/?q=renderer#api/en/renderers/WebGLRenderer">Renderer</a><ul><li>This is responsible for taking our 3D scene and camera and outputting an image to the screen</li></ul></li><li>the <a href="https://threejs.org/docs/?q=camera#api/en/cameras/PerspectiveCamera">Camera</a><ul><li>This is our view into the scene</li><li>We’ll initialize it using <a href="https://threejs.org/docs/?q=orbitcontr#examples/en/controls/OrbitControls">OrbitControls</a> so that we revolve around our scene</li></ul></li></ul><p>We’ll define global variables for these objects for convenience, and initialize them inside our <code class="language-plaintext highlighter-rouge">init()</code> function based on our screen size.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// necessary global objects</span>
<span class="kd">var</span> <span class="nx">scene</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">renderer</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">camera</span><span class="p">;</span>

<span class="c1">// objects in the scene that we want to access outside of init</span>
<span class="kd">var</span> <span class="nx">group</span><span class="p">;</span>

<span class="p">...</span>

<span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// basic scene objects</span>
    <span class="nx">scene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Scene</span><span class="p">();</span>
    <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">({</span> <span class="na">antialias</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">alpha</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="nx">renderer</span><span class="p">.</span><span class="nx">setSize</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">);</span>
    <span class="nx">renderer</span><span class="p">.</span><span class="nx">setPixelRatio</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">devicePixelRatio</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">);</span>

    <span class="c1">// set up camera</span>
    <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">/</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">controls</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OrbitControls</span><span class="p">(</span><span class="nx">camera</span><span class="p">,</span> <span class="nx">renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">);</span>
    <span class="nx">camera</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">camera</span><span class="p">)</span>

    <span class="c1">// group of all of the objects we want to render in our scene</span>
    <span class="nx">group</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Group</span><span class="p">();</span>
    <span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">group</span><span class="p">);</span>

    <span class="p">...</span>

<span class="p">}</span>
</code></pre></div></div><p>In particular, notice that we add objects to our scene using <code class="language-plaintext highlighter-rouge">scene.add(object)</code>. We’ll similarly add objects to our group with <code class="language-plaintext highlighter-rouge">group.add(object)</code>, and we can even add objects to other object. More on this later!</p><h2 id="setting-up-animation"> Setting up animation <a href="#setting-up-animation">#</a></h2><p>An animation happens when we render a different image at every frame. In JavaScript, to get a smooth animation, we must repeatedly call the <code class="language-plaintext highlighter-rouge">requestAnimationFrame</code> function to ask it to render again as soon as possible. So our animate function will look like this:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// request for animate() to be called again next frame</span>
    <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">animate</span><span class="p">);</span>
    <span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">scene</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><p>Now we can get our scene up and running:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">init</span><span class="p">();</span>
<span class="nx">animate</span><span class="p">();</span>
</code></pre></div></div><h2 id="adding-a-terrible-sphere"> Adding a terrible sphere <a href="#adding-a-terrible-sphere">#</a></h2><p>Let’s try adding a really bad sphere and see what happens. That way, we’ll see our improvements when we add lighting, increase the geometry resolution, and add textures.</p><p>What we need to add to our scene is a <a href="https://threejs.org/docs/?q=mesh#api/en/objects/Mesh">Mesh</a>, which is an object that can be rendered. A mesh requires a geometry, aka a shape, and a material, aka how it looks.</p><p>For our geometry, we’ll make a <a href="https://threejs.org/docs/?q=geometry#api/en/geometries/SphereGeometry">SphereGeometry</a>. The constructor takes arguments for its radius, the number of segments it uses along its width, and the number of segments it uses along its height. Let’s give it a raidus of <code class="language-plaintext highlighter-rouge">1</code> for simplicity, and <code class="language-plaintext highlighter-rouge">5</code> segments in each direction, so that it looks chunky for now.</p><p>For our material, we’ll make a simple <a href="https://threejs.org/docs/?q=geometry#api/en/geometries/SphereGeometry">MeshStandardMaterial</a>. We’ll add some more fancy features to it later.</p><p>Now we can make our “sphere” mesh and add it to our scene:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">SphereGeometry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">material</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">MeshStandardMaterial</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">sphere</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Mesh</span><span class="p">(</span><span class="nx">geometry</span><span class="p">,</span> <span class="nx">material</span><span class="p">);</span>
<span class="nx">group</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">sphere</span><span class="p">);</span>
</code></pre></div></div><p>Now you should see a weird chunky dark thing on your screen. Why is it pitch black? Because we don’t have any lighting yet! Let’s add that next.</p><h2 id="adding-some-lighting"> Adding some lighting <a href="#adding-some-lighting">#</a></h2><p>The most basic type of lighting we can add is <a href="https://threejs.org/docs/?q=ambient#api/en/lights/AmbientLight">ambient lighting</a>, which adds a little bit of light to everything in the scene equally. This mimics how a little bit of light bounces around everywhere when we’re not in a pitch-black room, though there is no such thing as ambient lighting in real life. To add ambient lighting, all we need to do is choose its colour and add it to the scene. (Feel free to mess around with its colour!)</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">ambientLight</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">AmbientLight</span><span class="p">(</span><span class="mh">0x404040</span><span class="p">);</span> <span class="c1">// soft white light</span>
<span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">ambientLight</span><span class="p">);</span>
</code></pre></div></div><p>Now our sphere is no longer pitch-black! Let’s make even more interesting lighting though, by adding… the sun! In real life, the sun is so far away that it feels less like a point light and more like light coming from a certain direction, so we’ll use a <a href="https://threejs.org/docs/?q=direction#api/en/lights/DirectionalLight">DirectionalLight</a>. Feel free to position it how you want, but we’ll give you some coordinates that look okay for us. Once we position the light, we’ll make it point at our sphere by setting its <code class="language-plaintext highlighter-rouge">target</code>.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nb">sun</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">DirectionalLight</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>  <span class="c1">// colour and intensity</span>
<span class="nb">sun</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">sphere</span><span class="p">;</span>  <span class="c1">// point at sphere</span>
<span class="nb">sun</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>  <span class="c1">// move right, up, forward</span>
<span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">sun</span><span class="p">);</span>
</code></pre></div></div><p>Now we have a nice, thoroughly illuminated, white potato! Congrats!</p><h2 id="returning-to-the-sphere---materials-and-resolution"> Returning to the sphere - materials and resolution <a href="#returning-to-the-sphere---materials-and-resolution">#</a></h2><p>To make our sphere look more sphere-y, let’s increase its geometry resolution. We can do this by changing its segment parameters from 5 up to a bigger number, so that it’s less blocky.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">SphereGeometry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">);</span>  <span class="c1">// 40 segments in each direction</span>
</code></pre></div></div><p>Let’s also make it into a globe, by giving it a texture. We got our textures from <a href="http://planetpixelemporium.com/earth.html">this</a> website, we downloaded their 1K versions, but feel free to find your own. What we really need is a colour map (aka what we normally call a texture) and a bump map.</p><p>We can load them onto our sphere by modifying our Material object to load a <code class="language-plaintext highlighter-rouge">map</code> and a <code class="language-plaintext highlighter-rouge">bumpMap</code>:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">material</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">MeshStandardMaterial</span><span class="p">({</span>
    <span class="na">map</span><span class="p">:</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">TextureLoader</span><span class="p">().</span><span class="nx">load</span><span class="p">(</span><span class="dl">'</span><span class="s1">./img/globe.jpg</span><span class="dl">'</span><span class="p">),</span>
    <span class="na">bumpMap</span><span class="p">:</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">TextureLoader</span><span class="p">().</span><span class="nx">load</span><span class="p">(</span><span class="dl">'</span><span class="s1">./img/earthbump1k.jpg</span><span class="dl">'</span><span class="p">),</span>
    <span class="na">bumpScale</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>  <span class="c1">// how bumpy our bump map will make our sphere</span>
<span class="p">});</span>
</code></pre></div></div><p>Now our sphere should look like the earth! If you’re curious what the bump map is doing, I recommend you remove the image texture and take a look. The purpose of the bump map is to make the sphere look bumpy, and react to the ligthing as if it has the geometry of the texture (e.g. the mountains and valleys on earth), but without us having to change the actual geometry of our mesh. So our sphere is still geometrically a sphere, but it reflects light as if it’s bumpy!</p><h3 id="extra-making-the-sun-follow-our-camera-around"> Extra: making the sun follow our camera around <a href="#extra-making-the-sun-follow-our-camera-around">#</a></h3><p>Now that our Earth looks cool, we might wanna revolve around and look at every little bit of it. But some parts are pretty dark. It’s pretty frustrating trying to look at the parts where the sun don’t shine, so let’s make our sun follow our camera around. We can do this by adding the sun to the <code class="language-plaintext highlighter-rouge">camera</code> object instead of the <code class="language-plaintext highlighter-rouge">scene</code> object, so that the camera is the “parent” pulling the sun around with it like a kid at Home Depot.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nb">sun</span> <span class="o">=</span> <span class="p">...</span>
<span class="c1">// scene.add(sun);  // fixed sun</span>
<span class="nx">camera</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">sun</span><span class="p">);</span>    <span class="c1">// sun follows camera</span>
</code></pre></div></div><h3 id="extra-making-the-sphere-rotate"> Extra: Making the sphere rotate <a href="#extra-making-the-sphere-rotate">#</a></h3><p>I think it’ll be pretty cool if the Earth was slowly rotating, so let’s add that in. All we need to do is update our <code class="language-plaintext highlighter-rouge">animate()</code> function to rotate our object group:</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">...</span>

    <span class="nx">group</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="mf">0.0025</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>We increment the y-axis rotation because this will make it revolve around the vertical axis. You can imagine a skewer sticking through the Earth vertically, and spinning it around on that axis.</p><h2 id="adding-simple-markers-for-places"> Adding simple markers for places <a href="#adding-simple-markers-for-places">#</a></h2><p>Let’s add markers to our globe to point out some important places. Why are these places important? You’ll see at 4:36 AM GMT on July 26th 2025!</p><p>We’ve made the <code class="language-plaintext highlighter-rouge">addMarker()</code> function to do most of this for you, though we left out the actual marker. For simplicity, let’s make it a sphere. But since it’ll be intersecting the surface of the Earth, it’ll look like a half-sphere, which looks kinda cool.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">mesh</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Mesh</span><span class="p">(</span>
    <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">SphereGeometry</span><span class="p">(</span><span class="mf">0.015</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>  <span class="c1">// tiny and round</span>
    <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">MeshStandardMaterial</span><span class="p">({</span> <span class="na">color</span><span class="p">:</span> <span class="nx">markerColor</span> <span class="p">})</span>
<span class="p">);</span>
</code></pre></div></div><p>Now we can add our markers by simply specifying their names, locations, and colours.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// add markers to cool cities</span>
<span class="nx">addMarker</span><span class="p">(</span><span class="dl">'</span><span class="s1">Ottawa</span><span class="dl">'</span><span class="p">,</span> <span class="mf">45.4215</span><span class="p">,</span> <span class="o">-</span><span class="mf">75.6972</span><span class="p">,</span> <span class="mh">0xff0000</span><span class="p">,</span> <span class="nx">font</span><span class="p">,</span> <span class="nx">group</span><span class="p">);</span>
<span class="nx">addMarker</span><span class="p">(</span><span class="dl">'</span><span class="s1">Nairobi</span><span class="dl">'</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.286389</span><span class="p">,</span> <span class="mf">36.817223</span><span class="p">,</span> <span class="mh">0x0000ff</span><span class="p">,</span> <span class="nx">font</span><span class="p">,</span> <span class="nx">group</span><span class="p">);</span>
<span class="nx">addMarker</span><span class="p">(</span><span class="dl">'</span><span class="s1">Rio de Janeiro</span><span class="dl">'</span><span class="p">,</span> <span class="o">-</span><span class="mf">22.908333</span><span class="p">,</span> <span class="o">-</span><span class="mf">43.196388</span><span class="p">,</span> <span class="mh">0x00ff00</span><span class="p">,</span> <span class="nx">font</span><span class="p">,</span> <span class="nx">group</span><span class="p">);</span>
</code></pre></div></div><p>We chose some wacky colours here, but try changing them all to black for a sleeker look.</p><h2 id="conclusion"> Conclusion <a href="#conclusion">#</a></h2><p>That’s our basic globe widget! It was inspired particularly by the one on the <a href="https://github.com/home">GitHub homepage</a>, though we didn’t go through the same <a href="https://github.blog/2020-12-21-how-we-built-the-github-globe/">process</a> since that’s kinda insane. Though you can definitely get results that look pretty good using better choice in textures, messing with lighting, and maybe adding your own shaders.</p><p>Thanks for following along!</p></section><section><nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/workshops/2022/03/01/model1"><div class="nav-arrow">Previous</div><span class="post-title">Model UofT session 1 recording</span> </a></nav></section></main><script> function setTheme(theme) { if (theme === "dark") { document.documentElement.setAttribute('data-theme', 'dark'); window.localStorage.setItem('theme', 'dark'); document.getElementById("theme-toggle").classList.add('sun'); document.getElementById("theme-toggle").classList.remove('moon'); } else { document.documentElement.setAttribute('data-theme', 'light'); window.localStorage.setItem('theme', 'light'); document.getElementById("theme-toggle").classList.add('moon'); document.getElementById("theme-toggle").classList.remove('sun'); } } let theme = localStorage.getItem('theme'); theme = theme || (window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light'); setTheme(theme); function modeSwitcher() { let currentMode = document.documentElement.getAttribute('data-theme'); if (currentMode === "dark") { setTheme('light'); } else { setTheme('dark'); } } </script></body><footer class="social-footer"><div class="social-footer-icons"> <a href="https://github.com/P0WEX" title="Github profile, nothing much there, yet" target="_blank" rel="noopener noreferrer"><i class="fa fa-github" aria-hidden="true"></i></a> <a href="https://utcg.github.io/workshops/atom.xml" title="Feed RSS" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss" aria-hidden="true"></i></a> <a href="https://github.com/P0WEX/Gesko" title="Browse the code" target="_blank" rel="noopener noreferrer"><i class="fa fa-code" aria-hidden="true"></i></a></div></footer></html>
